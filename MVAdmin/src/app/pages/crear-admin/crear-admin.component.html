<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <!-- <li class="breadcrumb-item"><a routerLink="/inicio/dashboard">Cementerios</a></li> -->
      <li class="breadcrumb-item"><a routerLink="/inicio/perfil/{{this.id.camposanto}}">Inicio</a></li>
      <li class="breadcrumb-item"><a routerLink="/inicio/administradores">Administradores</a></li>
      <li class="breadcrumb-item active" aria-current="page">Crear Administrador</li>
    </ol>
  </nav>
  
  <div *ngIf="!editando"class="row" >
    <div class="col-12">
      <h1>Registro de administrador</h1>
    </div>
  </div>

  <div *ngIf="editando" class="row" >
    <div class="col-12">
      <h1>Editar administrador</h1>
    </div>
  </div>

  <br>
  <div class="container-fluid">
    
    <div class="row">
      <div class="col-12">
        <form [formGroup]="adminForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <div class="col-5">
                <div class="form-group">
                  <label for="usuario"><i class="campo-req">*</i> Nombre de Usuario</label>
                  <input id="usuario" type="text"  class="form-control form-control-sm" formControlName="usuario"
                   required [ngClass]="{ 'is-invalid': submitted && usuario.errors }"/>
                  <div *ngIf=" usuario.invalid && (usuario.dirty || usuario.touched)" class="">
                    <div *ngIf="usuario.errors.required " class="text-danger"><small>Ingresar un nombre de usuario</small></div>
                    <div *ngIf="usuario.errors.usernameMatch" class="text-danger"><small> Nombre de usuario ya registrado</small></div>
                  </div>
                </div>
    
            </div>

            <div class="col-5">
                <div class="form-group">
                  <label for="correo"><i class="campo-req">*</i> Correo</label>
                  <input id="correo" type="text" formControlName="correo" class="form-control form-control-sm"
                    [ngClass]="{ 'is-invalid': submitted && f.correo.errors }" required/>
                  <div *ngIf=" correo.invalid && (correo.dirty || correo.touched) " class="">
                    <div *ngIf="correo.errors.required" class="text-danger"><small>Ingresar un correo electrónico</small></div>
                    <div *ngIf="correo.errors.email" class="text-danger"><small>Ingresar un correo electrónico válido</small></div>
                    <div *ngIf="correo.errors.correoMatch" class="text-danger"> <small>Este correo ya ha sido registrado</small></div> 
                  </div>
                </div>
    
            </div>

            <div class="col-5">
              <div class="form-group">
                <label for="firstName"><i class="campo-req">*</i> Nombres</label>
                <input id="firstName" type="text" formControlName="firstName" class="form-control form-control-sm"
                  [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" required/>
                <div *ngIf=" firstName.invalid && (firstName.dirty || firstName.touched)" >
                  <div *ngIf="firstName.errors.required" class="text-danger"><small>Ingresar nombres</small></div>
                </div>
              </div>
  
            </div>
            <div class="col-5"> 
              <div class="form-group">
                <label for="lastName"><i class="campo-req">*</i> Apellidos</label>
                <input id="lastName" type="text" formControlName="lastName" class="form-control form-control-sm"
                  [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" />
                <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" >
                  <div *ngIf="lastName.errors.required" class="text-danger"><small>Ingresar apellidos</small></div>
                </div>
              </div>
            </div>

            <div class="col-5"> 
                <div *ngIf="mostrar_contrasena" class="form-group">
                  <label for="contrasena"><i class="campo-req">*</i> Contraseña</label>
                  <input  id="contrasena" type="password" formControlName="contrasena" class="form-control form-control-sm"
                    [ngClass]="{ 'is-invalid': submitted && f.contrasena.errors }" />
                  <div *ngIf="contrasena.invalid && (contrasena.dirty || contrasena.touched)" >
                    <div *ngIf="contrasena.errors.required" class="text-danger"><small>Ingresar Contraseña</small></div>
                    <div *ngIf="contrasena.errors.minlength" class="text-danger"><small>La contrasena debe tener minimo 6 carácteres</small> </div>

                  </div>
                </div>
              </div>

                <div class="col-5"> 
                    <div *ngIf="mostrar_contrasena" class="form-group">
                    <label for="repetirContrasena"><i class="campo-req">*</i> Repetir Contraseña</label>
                    <input  id="repetirContrasena" type="password" formControlName="repetirContrasena" class="form-control form-control-sm"
                        [ngClass]="{ 'is-invalid': submitted && f.repetirContrasena.errors }" />
                    <div *ngIf="repetirContrasena.invalid && (repetirContrasena.dirty || repetirContrasena.touched)">
                        <div *ngIf="repetirContrasena.errors.required" class="text-danger"><small>Repetir la Contraseña</small></div>
                        <div *ngIf="repetirContrasena.errors.mustMatch" class="text-danger"><small>Las contraseñas deben coincidir</small></div>
                    </div>
                    </div>
                </div>

                <div class="col-5"> 
                    <div class="form-group">
                      <label for="telefono"><i class="campo-req">*</i> Teléfono </label>
                      <input id="telefono" type="text" formControlName="telefono" class="form-control form-control-sm" minlength="7" maxlength="10" />
                      <div
                        *ngIf="adminForm.controls['telefono'].invalid && (adminForm.controls['telefono'].dirty || adminForm.controls['telefono'].touched)">
                        <div class="text-danger" *ngIf="adminForm.controls['telefono'].errors.required">
                          <small>Este campo es obligatorio.</small>
                        </div>
                        <div class="text-danger"
                          *ngIf="adminForm.controls['telefono'].errors.minlength ||adminForm.controls['telefono'].errors.maxlength">
                          <small>La longitud del campo debe ser de 7 o 10.</small>
                        </div>
                        <div class="text-danger" *ngIf="adminForm.controls['telefono'].errors.pattern">
                          <small>Ingrese un valor válido.</small>
                        </div>
                      </div>
                    </div>
                </div>
                
                <div class="col-5">
                    <div class="form-group">
                      <label><i class="campo-req">*</i> Tipo de Administrador:</label>
                      <div class="row">
                        <div class="col-6">
                          <input  id="superadmin" type="radio" value="su"  formControlName="tipoAdmin" required>
                          Super Administrador
                        </div>
                        <div class="col-6">
                          <input  id="admin" type="radio" value="ad"  formControlName="tipoAdmin" required> Administrador
                        </div>
                       
                      </div>
                      <div *ngIf="submitted && tipoAdmin.invalid" class="">
                        <div  class="text-danger"><small>Elegir un tipo</small></div>
                      </div>
                    </div>
                  </div>
          </div>
          <div class="row mt-3">
            <div class="col-5">
                <div class="form-group">
                    <mat-slide-toggle id="permisoToggle" formControlName="permisoToggle" class="font-weight-bold" [checked]="permisoPaginas" 
                     labelPosition="before"  ng-model="pepe" (change)="onChange()"> Asignar Permisos </mat-slide-toggle> 
                </div>
            </div>
          </div>
  
          <div class="row">
            <div class="col-12">
              <div class="form-group">
                <div class="row">
                  <div class="col-4 mt-2" *ngFor="let permiso of lista_permisos; let i = index">
                    <input type="checkbox" [value]="permiso.id_permiso" name="permisos_Admin" [attr.disabled]="disabled ? '' : null" [checked]="bool_permisos[i]">
                    {{permiso.nombre}}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group mt-10">
            <button class="btn btn-primary" type="submit" [disabled]="!adminForm.valid">Guardar registro</button>
          </div>
        </form>
      </div>
    </div>
  
  </div>
  